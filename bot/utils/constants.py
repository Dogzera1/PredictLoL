"""
Constantes globais do sistema Bot LoL V3 Ultra Avan√ßado
"""

from __future__ import annotations

# Sistema de Unidades Profissionais
MIN_CONFIDENCE_FOR_TIP = 0.50
MIN_EV_FOR_TIP = 0.01
MIN_UNITS = 0.5
MAX_UNITS = 5.0

# Odds
MIN_ODDS = 1.50
MAX_ODDS = 8.00

# Timing
SCAN_INTERVAL_MINUTES = 3
ODDS_CACHE_TIMEOUT_MINUTES = 5
MATCH_CACHE_TIMEOUT_MINUTES = 3
CLEANUP_INTERVAL_HOURS = 24  # Limpeza de dados a cada 24 horas

# API Timeouts
API_REQUEST_TIMEOUT_SECONDS = 5
TELEGRAM_REQUEST_TIMEOUT_SECONDS = 30

# Ligas e Tiers
LEAGUE_TIERS = {
    # Tier 1 - Principais ligas internacionais
    "LPL": 1,          # China
    "LCK": 1,          # Coreia do Sul
    "LEC": 1,          # Europa
    "LCS": 1,          # Am√©rica do Norte
    "MSI": 1,          # Mid-Season Invitational
    "WORLDS": 1,       # World Championship
    
    # Tier 2 - Ligas regionais importantes
    "CBLOL": 2,        # Brasil
    "LLA": 2,          # Am√©rica Latina
    "LJL": 2,          # Jap√£o
    "LCO": 2,          # Oceania
    "VCS": 2,          # Vietnam
    "PCS": 2,          # Pacific Championship Series
    "TCL": 2,          # Turquia
    "LCL": 2,          # CIS
    
    # Tier 3 - Ligas menores e qualificat√≥rias
    "LCKC": 3,         # LCK Challengers
    "LDL": 3,          # LPL Development League
    "ERL": 3,          # European Regional Leagues
    "ACADEMY": 3,      # LCS Academy
    "PRIME": 3,        # Prime League
}

# URLs base das APIs da Riot/Lolesports (baseado no openapi.yaml)
RIOT_API_ENDPOINTS = {
    "esports_api": "https://esports-api.lolesports.com/persisted/gw",
    "livestats_api": "https://feed.lolesports.com/livestats/v1", 
    "highlander_api": "https://api.lolesports.com/api/v1",
    "prod_relapi": "https://prod-relapi.ewp.gg/persisted/gw"
}

# Chave de API da Riot para desenvolvimento/teste (atualizada)
RIOT_API_KEY = "0TvQnueqKa5mxJntVWt0w4LpLfEkrV1Ta8rQBb9Z"

# PandaScore API
PANDASCORE_API_KEY = "90jCQbmni5dVyZnvr6iF9XesBRVSb3rG1L47T5sjR1_4_t8_JqQ"
PANDASCORE_BASE_URL = "https://api.pandascore.co"

# Locales suportados (baseado no openapi.yaml)
SUPPORTED_LOCALES = [
    "en-US", "en-GB", "en-AU", "cs-CZ", "de-DE", "el-GR", "es-ES",
    "es-MX", "fr-FR", "hu-HU", "it-IT", "pl-PL", "pt-BR", "ro-RO", 
    "ru-RU", "tr-TR", "ja-JP", "ko-KR"
]

# Status v√°lidos para partidas ao vivo - EXPANDIDO
VALID_LIVE_STATUSES = {
    "inprogress",
    "live", 
    "ongoing",
    "in_progress",
    "started",
    "running",        # Adicionado para PandaScore
    "active",         # Status gen√©rico
    "playing",        # Partida em andamento
    "draft",          # Fase de draft/pick & ban
    "loading",        # Carregando jogo
    "paused",         # Partida pausada (ainda v√°lida)
    "ready",          # Pronta para iniciar
    "configured"      # Configurada e pronta
}

# Rate limits
RIOT_API_RATE_LIMITS = {
    "requests_per_second": 20,
    "requests_per_two_minutes": 100
}

PANDASCORE_RATE_LIMITS = {
    "requests_per_second": 10,
    "requests_per_hour": 1000
}

# Configura√ß√µes do sistema de unidades - AJUSTADAS para desenvolvimento
UNITS_CONFIG = {
    "very_high_risk": {
        "min_confidence": 0.80,
        "min_ev": 0.10,
        "units": 5.0,
        "risk_level": "Risco Muito Alto"
    },
    "high_risk": {
        "min_confidence": 0.75,
        "min_ev": 0.08,
        "units": 4.0,
        "risk_level": "Risco Alto"
    },
    "high_risk_2": {
        "min_confidence": 0.70,
        "min_ev": 0.06,
        "units": 3.0,
        "risk_level": "Risco Alto"
    },
    "medium_high_risk": {
        "min_confidence": 0.65,
        "min_ev": 0.05,
        "units": 2.5,
        "risk_level": "Risco M√©dio-Alto"
    },
    "medium_risk": {
        "min_confidence": 0.60,
        "min_ev": 0.04,
        "units": 2.0,
        "risk_level": "Risco M√©dio"
    },
    "low_risk": {
        "min_confidence": 0.55,
        "min_ev": 0.03,
        "units": 1.0,
        "risk_level": "Risco Baixo"
    },
    "minimum": {
        "min_confidence": 0.50,
        "min_ev": 0.01,
        "units": 0.5,
        "risk_level": "Risco M√≠nimo"
    }
}

# Eventos cruciais do LoL
CRUCIAL_EVENTS = {
    "dragon_soul": "DRAGON_SOUL",
    "elder_dragon": "ELDER_DRAGON",
    "baron": "BARON_NASHOR",
    "ace": "ACE",
    "inhibitor": "INHIBITOR_DESTROYED",
    "nexus_tower": "NEXUS_TURRET_DESTROYED",
    "teamfight": "TEAMFIGHT_WIN",
    "gold_lead": "GOLD_LEAD_SIGNIFICANT"
}

# Timing scores para an√°lise
TIMING_SCORES = {
    "early_game": {"min": 0, "max": 15, "weight": 0.7},      # 0-15 min
    "mid_game": {"min": 15, "max": 30, "weight": 1.0},      # 15-30 min
    "late_game": {"min": 30, "max": 60, "weight": 0.8}      # 30+ min
}

# Headers para requisi√ß√µes HTTP
HTTP_HEADERS = {
    "User-Agent": "LoLBotV3/3.0.0 (Professional Esports Bot)",
    "Accept": "application/json",
    "Content-Type": "application/json"
}

# Headers espec√≠ficos da Riot API (baseado no openapi.yaml)
RIOT_HEADERS = {
    **HTTP_HEADERS,
    "x-api-key": RIOT_API_KEY
}

# Configura√ß√µes do Telegram
TELEGRAM_CONFIG = {
    "bot_token": "7584060058:AAFux8K9JiQUpH27Mg_mlYJEYLL1J8THXY0",  # Token atual
    "parse_mode": "MarkdownV2",
    "disable_web_page_preview": True,
    "max_message_length": 4096,
    "rate_limit_per_user": 10,  # mensagens por hora por usu√°rio
    "cache_duration_minutes": 5,
    "admin_user_ids": ["8012415611"]  # ID do admin como padr√£o
}

# Template melhorado para tips do Telegram - EXPERI√äNCIA PREMIUM
TIP_TEMPLATE = {
    "header": "üöÄ **TIP PROFISSIONAL LoL** üöÄ",
    "match_info": "üéÆ **{team_a}** vs **{team_b}**\nüèÜ **Liga:** {league} | üó∫Ô∏è **Mapa:** {map_number}\n‚è∞ **Tempo:** {game_time} | üî¥ **Status:** {match_status}",
    
    # Se√ß√£o da tip principal
    "tip_main": "‚ö° **APOSTAR EM:** {tip_on_team}\nüí∞ **Odds Atual:** {odds} | üìä **Odds M√≠nima:** {min_odds}",
    
    # Explica√ß√£o did√°tica da tip
    "tip_explanation": "üìù **Por que apostar?**\n{explanation_text}",
    
    # Informa√ß√µes de gest√£o de risco
    "risk_management": "üéØ **Gest√£o de Risco:**\n{risk_emoji} **{units} unidades** ({risk_level})\nüí° **Valor da unidade:** R$ {unit_value}\nüí∏ **Apostar:** R$ {bet_amount}",
    
    # An√°lise t√©cnica
    "technical_analysis": "üìä **An√°lise T√©cnica:**\nüéØ **Confian√ßa:** {confidence_percentage}%\nüìà **Expected Value:** +{ev_percentage}%\n‚≠ê **Qualidade dos Dados:** {data_quality_score}%",
    
    # Situa√ß√£o atual da partida
    "game_situation": "üî• **Situa√ß√£o Atual:**\n{game_situation_text}",
    
    # Pr√≥ximos objetivos importantes
    "next_objectives": "‚è≥ **Pr√≥ximos Objetivos:**\n{objectives_text}",
    
    # Timing da aposta
    "bet_timing": "‚ö†Ô∏è **Timing:**\n{timing_advice}",
    
    # Hist√≥rico dos times (se dispon√≠vel)
    "teams_history": "üìà **Hist√≥rico Recente:**\n{history_text}",
    
    # Alertas importantes
    "alerts": "üö® **Alertas:**\n{alerts_text}",
    
    # Rodap√©
    "footer": "ü§ñ **Fonte:** {prediction_source} | ‚è±Ô∏è **Gerado:** {generated_time}\nüî• **Bot LoL V3 Ultra Avan√ßado** | üìä **Tip #{tip_id}**"
}

# Explica√ß√µes did√°ticas para diferentes cen√°rios
TIP_EXPLANATIONS = {
    "early_advantage": "O time {team} est√° com uma vantagem s√≥lida no in√≠cio da partida, controlando recursos importantes e demonstrando superioridade estrat√©gica.",
    "momentum_shift": "Detectamos uma mudan√ßa de momentum favor√°vel ao {team}, com conquistas recentes de objetivos cruciais que indicam dom√≠nio crescente.",
    "late_game_superior": "Em partidas longas, {team} tem composi√ß√£o e macro-jogo superiores, tornando-se favorito conforme o tempo passa.",
    "objective_control": "{team} est√° dominando objetivos estrat√©gicos (Drag√µes, Baron), o que historicamente resulta em maior taxa de vit√≥ria.",
    "gold_lead_significant": "Vantagem de ouro de {gold_diff} est√° em n√≠vel cr√≠tico, onde estatisticamente {team} tem {win_rate}% de chance de vit√≥ria.",
    "team_comp_advantage": "A composi√ß√£o de {team} √© superior na fase atual do jogo, com vantagem em teamfights e controle de mapa.",
    "default": "Baseado em an√°lise de m√∫ltiplos fatores, {team} apresenta maior probabilidade de vit√≥ria neste momento da partida."
}

# Conselhos de timing para apostas
TIMING_ADVICE = {
    "immediate": "‚ö° **Entre AGORA** - Situa√ß√£o ideal identificada",
    "wait_for_better_odds": "‚è≥ **Aguarde** - Odds podem melhorar nos pr√≥ximos minutos",
    "last_chance": "üö® **√öLTIMA CHANCE** - Partida decidindo-se rapidamente",
    "stable_situation": "‚úÖ **Situa√ß√£o est√°vel** - Pode entrar com seguran√ßa",
    "risky_timing": "‚ö†Ô∏è **Timing arriscado** - Situa√ß√£o vol√°til, considere apostar menos"
}

# Alertas importantes para usu√°rios
ALERT_MESSAGES = {
    "high_volatility": "üå™Ô∏è Partida muito vol√°til - Resultado pode mudar rapidamente",
    "comeback_possible": "üîÑ Time perdedor ainda pode virar - Cuidado com revers√µes",
    "dominant_position": "üëë Posi√ß√£o dominante - Chance baixa de virada",
    "early_game": "üåÖ In√≠cio de partida - Situa√ß√£o pode mudar drasticamente",
    "late_game_decide": "üåô Partida decidindo - Pr√≥ximo teamfight pode ser crucial",
    "baron_available": "üê≤ Baron dispon√≠vel - Pr√≥ximos 5min s√£o cr√≠ticos",
    "elder_dragon_up": "üî• Elder Dragon dispon√≠vel - Pode decidir a partida",
    "inhibitor_down": "üè† Inibidor destru√≠do - Press√£o significativa",
    "no_major_alerts": "‚úÖ Situa√ß√£o controlada - Sem alertas especiais"
}

# Emojis para mapas
MAP_EMOJIS = {
    1: "üó∫Ô∏è Mapa 1",
    2: "üó∫Ô∏è Mapa 2", 
    3: "üó∫Ô∏è Mapa 3",
    4: "üó∫Ô∏è Mapa 4",
    5: "üó∫Ô∏è Mapa 5",
    "unknown": "üó∫Ô∏è Mapa ?"
}

# Status da partida em portugu√™s
MATCH_STATUS_PT = {
    "live": "üî¥ AO VIVO",
    "inprogress": "üî¥ EM ANDAMENTO",
    "ongoing": "üî¥ ACONTECENDO",
    "in_progress": "üî¥ EM PROGRESSO",
    "started": "üî¥ INICIADA",
    "draft": "üìã DRAFT",
    "lobby": "üè† LOBBY",
    "unknown": "‚ùì DESCONHECIDO"
}

# Objetivos pr√≥ximos baseados no tempo de jogo
NEXT_OBJECTIVES_BY_TIME = {
    "early": ["üêâ Primeiro Drag√£o (6min)", "üè∞ Primeira Torre", "ü¶Ä Caranguejo"],
    "mid": ["üêâ Alma do Drag√£o", "üê≤ Baron Nashor (20min)", "üè∞ Torres Externas"],
    "late": ["üî• Elder Dragon", "üê≤ Baron Buff", "üè† Inibidores", "üëë Nexus"]
}

# Emojis para n√≠veis de risco
RISK_EMOJIS = {
    "Risco Muito Alto": "üî•üî•üî•",
    "Risco Alto": "üî•üî•", 
    "Risco M√©dio-Alto": "üî•",
    "Risco M√©dio": "üìä",
    "Risco Baixo": "üéØ",
    "Risco M√≠nimo": "üí°"
}

# Emojis para Expected Value
EV_EMOJIS = {
    "high": "üìà",    # EV > 15%
    "medium": "üìä",  # 5% < EV <= 15%
    "low": "üìâ"      # EV <= 5%
}

# Ligas suportadas para an√°lise - EXPANDIDA PARA INCLUIR TODAS AS REGIONAIS
SUPPORTED_LEAGUES = {
    # Tier 1 - Principais ligas internacionais
    "LCS", "LEC", "LPL", "LCK", "CBLOL", "LLA", "WORLDS", "MSI",
    
    # Tier 2 - Ligas regionais importantes
    "LJL", "LCO", "VCS", "PCS", "TCL", "LCL",
    
    # Tier 3 - Ligas menores e qualificat√≥rias  
    "LCKC", "LDL", "ERL", "ACADEMY", "PRIME",
    
    # Ligas regionais espec√≠ficas - BRASIL
    "LRS", "Circuito Desafiante", "CBLOL Academy", "Liga Brasileira",
    
    # Ligas regionais espec√≠ficas - EUROPA
    "LFL", "Prime League", "Superliga", "GLL", "LVP", "PG Nationals",
    "NLC", "Ultraliga", "TCL Academy", "LCL Academy",
    
    # EMEA Masters e varia√ß√µes - ADICIONADO EXPLICITAMENTE
    "EMEA Masters", "EM", "European Masters", "EU Masters", 
    "EMEA Championship", "European Championship", "EMEA",
    
    # Ligas regionais espec√≠ficas - √ÅSIA
    "LJL Academy", "LCO Academy", "VCS Academy", "PCS Academy",
    
    # Ligas regionais espec√≠ficas - AMERICAS
    "LCS Academy", "LLA Academy", "Copa Am√©rica",
    
    # Torneios e eventos especiais
    "Demacia Cup", "Rift Rivals", "All-Star", "Clash",
    "University Championship", "Student Championship",
    
    # Ligas semi-profissionais
    "Challengers", "Amateur", "Regional", "Open", "Qualifier",
    
    # Wildcards gen√©ricos para capturar outras ligas
    "Academy", "Championship", "League", "Tournament", "Cup",
    "Series", "Circuit", "Challenge", "Masters", "Premier"
}

# Thresholds para sistema de predi√ß√£o - OTIMIZADOS para odds altas e valor
PREDICTION_THRESHOLDS = {
    "min_confidence": 0.45,          # Reduzido para permitir mais tips  
    "min_ev": 0.5,                   # EV m√≠nimo para aceitar apostas
    "min_odds": 1.50,                # Odds m√≠nima 1.5x conforme solicitado
    "max_odds": 8.00,                # Aumentado para incluir odds altas valiosas
    "min_game_time": 0,              # Permitir desde o draft/in√≠cio
    "min_data_quality": 0.05,        # Aceitar dados b√°sicos
    "cache_time_minutes": 10,        # Cache de predi√ß√µes
    "ml_confidence_threshold": 0.45,  # Threshold ML
    "hybrid_weight_ml": 0.6,         # Peso do ML no m√©todo h√≠brido
    "hybrid_weight_algo": 0.4,       # Peso dos algoritmos no h√≠brido
    # Configura√ß√µes espec√≠ficas para odds altas
    "high_odds_threshold": 4.0,      # Odds consideradas "altas"
    "high_odds_min_ev": 3.0,         # EV m√≠nimo para odds altas (3%)
    "high_odds_confidence_penalty": 0.1  # Redu√ß√£o de confian√ßa para odds altas
}

# Pesos para modelo ML simulado
ML_FEATURE_WEIGHTS = {
    "gold_advantage": 0.25,
    "tower_advantage": 0.20,
    "dragon_advantage": 0.15,
    "baron_advantage": 0.15,
    "kill_advantage": 0.10,
    "overall_advantage": 0.30,
    "game_phase": 0.05,
    "crucial_events": 0.10,
    "has_momentum": 0.08
}

# Configura√ß√µes de Qualidade de Dados
USE_ONLY_REAL_DATA = True  # Sistema trabalha apenas com dados reais, sem mocks/simula√ß√µes
REQUIRE_LIVE_ODDS = True   # Exige odds reais para gerar tips
MIN_DATA_QUALITY_THRESHOLD = 0.8  # Qualidade m√≠nima de dados para aceitar 
